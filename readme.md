# Содержание:
- [Section 1. Основы Linux](https://github.com/Chawotto/intership/blob/main/readme.md#section-1-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-linux)
- [Section 2. Вертим Git](https://github.com/Chawotto/intership/blob/main/readme.md#section-2-%D0%B2%D0%B5%D1%80%D1%82%D0%B8%D0%BC-git)



# Section 1. Основы Linux:

  TASK 1.1 "Конфигурация виртуальной машины"
- Поднять ubuntu на VirtualBox/VMware/Cloud. Создать там пользователей Raymond и John. 
- Raymond должен заходить только по SSH ключу на инстанс. А John должен каждый раз вводить свой пароль при попытке зайти на инстанс и не иметь возможности зайти по ssh ключу.
- Raymond должен иметь доступ к sudo, а John не сможет использовать его. 
- Из под пользователя Raymond создать документ, используя права доступа сделать так, чтобы пользователь John не смог редактировать содержимое документа, но смог его прочитать. Из под пользователя John создать shell скрипт(с любой командой) и дать возможность запускать его пользователю Raymond. 
- Поменять интерпретатор по умолчанию пользователю John(сделать, чтобы был bash). Создать нового пользователя так, чтобы у него сразу был интерпретатор sh по умолчанию. 
- Добавить нового пользователя в группу пользователя John, проверить, сможет ли он запускать созданный ранее shell скрипт. 
- Создать на своей хостовой машине файл, после чего прокинуть его на инстанс с помощью scp. 
- Используемые команды должны быть записаны в отдельный файлик.
  
  [ Использованные команды (1.1)](https://github.com/Chawotto/intership/blob/419409f88ad27676cccc9c5a66047709cebacf10/Section%201.%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B%20Linux/task%201.1/Used%20commands.txt)

Расчетное время: 3 рабочих дня. Время выполнения: 1 час.

  TASK 1.2 "Утилиты обработки текста/логов"
- Вывести размеры разделов диска в отдельный файл. Отсортировать количество столбцов до трех, оставив только Filesystem, Use%, Mounted on.
- Узнать размер всех файлов и папок в директории /etc. Отсортировать вывод так, чтобы показывало только 10 самых больших файлов.
- Cоздать файл со следующим содержанием. 
NDS/A
NSDA
ANS!D
NAD/A
- Вывести строки NDS/A и NAD/A из файла используя awk или sed(regexp).
- Вывести пронумерованные строчки из /etc/passwd, в которых есть оболочка /bin/bash, и перенаправить вывод в файл.
- Заменить все строчки с /bin/sh на /bin/bash(проводить на бэкапе).
- Используемые команды должны быть записаны в отдельный файлик.

  [ Использованные команды (1.2)](https://github.com/Chawotto/intership/blob/fb1b90df767a83dc2a220d42007c46fcadacca05/Section%201.%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B%20Linux/task%201.2/Used%20commands.txt)
  
Расчетное время: 3 рабочих дня. Время выполнения: 1 час.

TASK 1.3 "Процессы, systemd и cron"
- Написать Systemd unit, который будет раз в 15 секунд писать в файл вывод команды uptime. При убийстве процесса он должен перезапускаться. Если значение Load Average за минуту больше 1, то вывод команды uptime должен записываться в файл overload.
- Установить утилиту stress. Нагрузить свою систему, применив команду stress --cpu x --timeout 50s, где x - количество процессоров у виртуалки/системы. Проверить работоспособность 2 пунтка.
- Когда файл overload достигает размера в 50 кб, то он должен очищаться. В файл cleanup должны складываться логи об успешных очистках с временем самой очистки.
- Написать cron job, проверяющий каждые 10 минут статус вышесозданного юнита.
- Запустить утилиту ping, вывести запущенный процесс в background, проверить, что процесс находится в фоновом режиме, вернуть процесс в foreground. Остановить процесс, после чего удалить его. 
- Используемые команды должны быть записаны в отдельный файлик.

  [ Директория с файлами задачи (1.3)](https://github.com/Chawotto/intership/tree/784ce7c1921d969d687e12a18aea39e3b2c8f035/Section%201.%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B%20Linux/task%201.3)
  
Расчетное время: 4 рабочих дня. Время выполнения: 1.5 часа.

TASK 1.4 "Файловые системы"
- Создать каталог ~/test и в нем файл test_123 с любым содержимым. Создать символическую ссылку на каталог ~/test по такому пути: /tmp/soft_link. Используя ссылку /tmp/soft_link скопировать файл test_123 в каталог /tmp с тем же именем. Создать жесткую ссылку на файл /tmp/test_123 с именем /tmp/hard_link(вывести общее и использованное количество inodes).
- Подключить к виртуальной машине новый диск 3ГБ. Создать на нем один раздел размером 2 ГБ. Разметить раздел как xfs. Смонтировать раздел по пути /mnt. Создать любой файл на смонтированной файловой системе. Сделать скриншот/запись вывода команды "df -hT". Увеличить раздел до 3 ГБ. Расширить файловую систему на новое свободное пространство. Убедится, что созданный вами файл остался внутри раздела и файловой системы после всех манипуляций. Вновь ввести команду "df -hT". В чем разница? 
  LVM:
- Создать новую виртуальную машину. Сделать скриншоты вывода комманд df -h, pvs, lvs, vgs. Подключить 2 новых диска. Создать новую VG, добавить в него 1 диск; создать 2 LV, распределить доступное пространство между ними поровну. Создать на обоих томах файловую систему xfs. Создать две точки монтирования и смонтировать каждый из томов. Сделать запись/скриншот вывода команды "df -h". Добавить в VG второй оставшийся диск. Расширить первый LV на объем нового диска. Расширить файловую систему на размер нового доступного пространства. Сделать запись/скриншоты вывода комманд "df -h, pvs, lvs, vgs".

  [ Директория с файлами задачи (1.4)](https://github.com/Chawotto/intership/tree/f63c4d3613b41d5a9633fda9776ecef48004c729/Section%201.%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B%20Linux/task%201.4/Screenshots)

Расчетное время: - . Время выполнения: 1.5 часа.

TASK 1.5 "Nginx. Round Robin"
- Создать сервер t2.micro, он должен иметь публичный ip и доступ в интернет. Разрешить http трафик в security group, ассоциированной с данным сервером. 
- Установить Nginx, напиши конфигурационный файл, который будет раздавать html-страницу blue.html. Проверить работоспособность(выдает ли он нужную страницу).
- Создать еще два сервера t2.micro, на одном настроить раздачу страницы yellow.html, на втором настроить балансировщик между yellow и blue. Балансировщик должен направлять запрос на сервер с меньшим количеством подключений. По итогу должно получиться так, что при каждом новом подключении цвет заднего фона должен меняться.
- Добавить в конфигурацию вывод логов, который будет показывать, куда проксируется запрос клиента. 
- Создать еще один сервер с сайтом и добавить его в конфигурацию как backup сервер.
- Выгрузить конфиги в личный репозиторий на devops-gitlab.inno.ws.

  [ Директория с файлами задачи (1.5)](https://github.com/Chawotto/intership/tree/90c7de972f860bc506b71b7efe522c6c95b93aff/Section%201.%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B%20Linux/task%201.5)

Расчетное время: - . Время выполнения: 3 часа.

TASK 1.6 "Nginx, Apache. Настройка домена, обработка запросов"

- Создать сервер t2.micro(Ubuntu), он должен иметь публичный ip и доступ в интернет. При создании использовать User Data cкрипт. Разрешить http и https трафик в security group, ассоциированной с данным сервером.
- Зарегистрироваться на сайте: Free Dynamic DNS - Managed DNS - Managed Email - Domain Registration - No-IP , разобраться в типах DNS записей, сделать DNS записать типа A для созданного сервера. Получить сертификат для своего сервера, используя letsencrypt. Разобраться в цепочках сертификатов. 
- Установить Nginx на сервер. Написать конфигурацию nginx для обслуживания на 80 и 443 портах. 80 порт должен делать редирект на 443(сайт должен работать только по HTTPS). Веб-сервер должен раздавать /var/www/html/index.nginx-debian.html, который был сгенерирован User Data скриптом.  Проверить работоспособность. При вводе домена в поисковую строку должен выдаваться текст: Welcome to my web server. My private IP is *********. 
- В следующих чекпоинтах нужно изменять страницу nginx и конфигурационный файл:
- Клиент нажимает на слово-ссылку, после чего его перенаправляет на html-страницу с картинкой.
- Клиент нажимает на слово-ссылку, по которой можно скачать файл mp3 с музыкой.
- Сделать регулярное выражение для отображения картинок(png, jpg). Если формат jpg, то перевернуть картинку с помощью nginx. 
- Создать второй сервер t2.micro, установить Apache и PHP(fpm), взять за основу info.php файл. Настроить Apache на обслуживание данного файла.
- Создать слово-ссылку в html-странице, которая будет перенаправлять запрос с Nginx-cервера на Apache-сервер.

  [ Директория с файлами задачи (1.6)](https://github.com/Chawotto/intership/tree/4636890a12481f5c53efb0e72f3f9622861326cf/Section%201.%20%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B%20Linux/task%201.6)

Расчетное время: 3 рабочих дня. Время выполнения: 3 часа.

# Section 2. Вертим Git:

TASK 2.1 "Базовая работа с git-репозиториями"

- Установить консольный git-клиент. Настроить git-клиент, указав параметры user.name и user.email, соответствующие вашим данным. Создать репозиторий devops-task1 с помощью git init. Создать файл nginx.conf, содержащий конфигурацию nginx (базовую, которая появляется после установки пакета в linux /etc/nginx/nginx.conf). 

- Создать файл README.md с описанием того, что находится в репозитории (пример: "В данном репозитории находится дефолтный конфигурационный файл nginx"). Добавить файл README.md в репозиторий с помощью команды git commit. Добавить файл nginx.conf в репозиторий с помощью команды git commit.

- С помощью команды git log проверить, отображаются ли в истории два коммита. С помощью команды git status проверить, что в данной папке не осталось больше файлов/папок, которые не добавлены в репозиторий.

- Зарегистрироваться в двух публичных хостингах git-репозиториев bitbucket и github. Доступ к devops-gitlab.inno.ws ты должен был получить в начале курса. Если возникли какие-то проблемы с доступом, свяжись с ментором.

- Создать на каждом из хостингов репозиторий devops-task1; bitbucket и github - публичные (public) репозитории, devops-gitlab.inno.ws - внутренний (internal). В репозиторий, созданный в первом задании, добавить 3 удаленных сервера с помощью git remote add. Загрузить репозиторий во все git-хостинги с помощью git push.

- Клонировать репозиторий. Переключиться на 3-й от начала коммит (e8b3ec06b). Просмотреть содержимое файла deleted.txt.

- Проверить, что все созданные репозитории публичные, кроме репозитория на devops-gitlab.inno.ws.

Ссылки на репозитори:
[ Github ](https://github.com/Chawotto/devops-task1), [Gitlab](https://devops-gitlab.inno.ws/aliaksandr.yesepionak/devops-task1), [Bitbucket](https://bitbucket.org/chawotto/devops-task1/src/main/)

Расчетное время: 2 рабочих дня. Время выполнения: 1.5 часа.

TASK 2.2 "Бранчевание"

- В репозитории devops-task1, загруженном на хостинг в предыдущем задании, создай с помощью git checkout и git branch две новые ветки: develop и feature/new-site.
  
- В ветке develop измени настройки в nginx.conf: замени worker_connections на 16384 и закоммить изменения. В ветке develop измени nginx.conf, включи сжатие ответа для типа application/json и закоммить изменения.
  
- В ветке feature/new-site добавь файл conf.d/mysite.domain.com.conf с базовым описанием статического сайта и закоммить изменения.
  
- Добавь легковесный тег v0.1 на последний коммит в  ветке{{develop}} (где изменял nginx.conf).
  
- Добавь файл .gitignore в ветку feature/new-site.  Файл gitignore должен быть составлен таким образом, чтобы исключать из репозитория папку tmp и все ее содержимое. Создай локально папку tmp с несколькими файлами в ней, закоммить изменения.
  
- Загрузи обе ветки на gitlab. Загрузи тег на хостинг https://devops-gitlab.inno.ws с помощью git push и проверь его наличие.

Расчетное время: 2 рабочих дня. Время выполнения: 20 минут.
